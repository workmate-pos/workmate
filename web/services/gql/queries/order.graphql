query get($id: ID!) {
  order(id: $id) {
    __typename
    note
    totalDiscounts
    totalTax
    ...OrderInfoFragment
  }
}

fragment ShopMoneyAmountFragment on MoneyBag {
  shopMoney {
    amount
  }
}

query getLineItems($id: ID!, $after: String, $serviceCollectionId: ID = "gid://shopify/Collection/null") {
  order(id: $id) {
    lineItems(first: 10, after: $after) {
      nodes {
        ... on LineItem {
          id
          title
          taxable
          variant {
            id
            image {
              url
            }
            title
            product {
              id
              title
              isServiceItem: inCollection(id: $serviceCollectionId)
              featuredImage {
                url
              }
            }
          }
          quantity
          originalUnitPrice
          sku
          customAttributes {
            key
            value
          }
        }
      }
      pageInfo {
        hasNextPage
        endCursor
      }
    }
  }
}

query getPage($first: Int = 10, $after: String, $query: String) {
  orders(first: $first, after: $after, query: $query, sortKey: CREATED_AT, reverse: true) {
    nodes {
      ...OrderInfoFragment
    }
    pageInfo {
      hasNextPage
      endCursor
    }
  }
}

query getInfo($id: ID!) {
  order(id: $id) {
    ...OrderInfoFragment
  }
}

fragment OrderInfoFragment on Order {
  id
  name
  totalReceived
  totalPrice
  totalOutstandingSet {
    ...ShopMoneyAmountFragment
  }
  customer {
    id
    displayName
  }
  displayFulfillmentStatus
  displayFinancialStatus
  customAttributes {
    key
    value
  }
}

mutation update($input: OrderInput!) {
  orderUpdate(input: $input) {
    order {
      id
    }
    userErrors {
      ...UserErrorFragment
    }
  }
}

fragment UserErrorFragment on UserError {
  field
  message
}

query getManyOrderInfoDraftOrderInfo($ids: [ID!]!) {
  nodes(ids: $ids) {
    __typename
    ... on Order {
      name
      totalPrice
      totalOutstandingSet {
        ...ShopMoneyAmountFragment
      }
      displayFinancialStatus
      # TODO
      # displayFulfillmentStatus
    }
    ... on DraftOrder {
      name
      totalPrice
    }
  }
}
