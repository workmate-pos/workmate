query get($id: ID!) {
  order(id: $id) {
    __typename
    note
    totalDiscounts
    totalTax
    ...OrderInfoFragment
  }
}

query getMany($ids: [ID!]!) {
  nodes(ids: $ids) {
    __typename
    ...OrderInfoFragment
  }
}

query getManyForDatabase($ids: [ID!]!) {
  nodes(ids: $ids) {
    __typename
    ...DatabaseShopifyOrderFragment
  }
}

query getLineItemsForDatabase($orderId: ID!, $first: Int = 25) {
  order(id: $orderId) {
    lineItems(first: $first) {
      nodes {
        ...DatabaseShopifyOrderLineItemFragment
      }
      pageInfo {
        hasNextPage
        endCursor
      }
    }
  }
}

fragment ShopMoneyAmountFragment on MoneyBag {
  shopMoney {
    amount
  }
}

query getLineItems(
  $id: ID!,
  $after: String,
  $first: Int = 25,
  $fixedServiceCollectionId: ID = "gid://shopify/Collection/null",
  $mutableServiceCollectionId: ID = "gid://shopify/Collection/null"
) {
  order(id: $id) {
    lineItems(first: $first, after: $after) {
      nodes {
        ... on LineItem {
          id
          title
          taxable
          variant {
            id
            image {
              url
            }
            title
            product {
              id
              title
              hasOnlyDefaultVariant
              isFixedServiceItem: inCollection(id: $fixedServiceCollectionId)
              isMutableServiceItem: inCollection(id: $mutableServiceCollectionId)
              featuredImage {
                url
              }
            }
          }
          quantity
          originalUnitPrice
          sku
          customAttributes {
            key
            value
          }
        }
      }
      pageInfo {
        hasNextPage
        endCursor
      }
    }
  }
}

query getPage($first: Int = 10, $after: String, $query: String) {
  orders(first: $first, after: $after, query: $query, sortKey: CREATED_AT, reverse: true) {
    nodes {
      ...OrderInfoFragment
    }
    pageInfo {
      hasNextPage
      endCursor
    }
  }
}

query getInfo($id: ID!) {
  order(id: $id) {
    ...OrderInfoFragment
  }
}

fragment OrderInfoFragment on Order {
  id
  name
  totalReceived
  totalPrice
  totalOutstandingSet {
    ...ShopMoneyAmountFragment
  }
  customer {
    id
    displayName
  }
  displayFulfillmentStatus
  displayFinancialStatus
  customAttributes {
    key
    value
  }
}

mutation update($input: OrderInput!) {
  orderUpdate(input: $input) {
    order {
      id
    }
    userErrors {
      ...UserErrorFragment
    }
  }
}

fragment UserErrorFragment on UserError {
  field
  message
}

query getManyOrderInfoDraftOrderInfo($ids: [ID!]!) {
  nodes(ids: $ids) {
    __typename
    ... on Order {
      name
      totalPrice
      totalOutstandingSet {
        ...ShopMoneyAmountFragment
      }
      displayFinancialStatus
      # TODO
      # displayFulfillmentStatus
    }
    ... on DraftOrder {
      name
      totalPrice
    }
  }
}

fragment DatabaseShopifyOrderFragment on Order {
  id
  name
  customer {
    id
  }
  currentTotalPriceSet {
    shopMoney {
      amount
    }
  }
  totalOutstandingSet {
    shopMoney {
      amount
    }
  }
  customAttributes {
    key
    value
  }
  fullyPaid
}

fragment DatabaseShopifyOrderLineItemFragment on LineItem {
  id
  title
  variant {
    id
  }
  quantity: currentQuantity
  unfulfilledQuantity
  originalUnitPriceSet {
    shopMoney {
      amount
    }
  }
  discountedPriceSet: discountedUnitPriceAfterAllDiscountsSet {
    shopMoney {
      amount
    }
  }
  taxLines {
    priceSet {
      shopMoney {
        amount
      }
    }
  }
  customAttributes {
    key
    value
  }
}
