{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "properties": {
    "idFormat": {
      "type": "string",
      "minLength": 1
    },
    "statuses": {
      "type": "array",
      "items": {
        "type": "string"
      }
    },
    "discountShortcuts": {
      "type": "array",
      "items": {
        "title": "discount-shortcut",
        "$ref": "#/definitions/percentage-or-money"
      }
    },
    "discountRules": {
      "title": "discount-rules",
      "oneOf": [
        { "$ref": "#/definitions/discount-rule-only-allow-shortcuts" },
        { "$ref": "#/definitions/discount-rule-do-not-allow-shortcuts" }
      ]
    },
    "workOrderRequests": {
      "title": "work-order-requests",
      "description": "Settings related to work order requests, where customers can create a work order themselves.",
      "type": "object",
      "oneOf": [
        {
          "type": "object",
          "properties": {
            "enabled": {
              "const": false
            },
            "status": {
              "type": "null"
            }
          },
          "required": ["enabled", "status"],
          "additionalProperties": false
        },
        {
          "type": "object",
          "properties": {
            "enabled": {
              "const": true
            },
            "status": {
              "type": "string"
            }
          },
          "required": ["enabled", "status"],
          "additionalProperties": false
        }
      ]
    },
    "serviceCollectionId": {
      "description": "A collection name that is used to identify service products within Shopify",
      "oneOf": [
        {
          "$ref": "scalars.json#/definitions/ID"
        },
        {
          "type": "null"
        }
      ]
    },
    "defaultRate": {
      "description": "The default rate used for employees when no rate is specified",
      "$ref": "scalars.json#/definitions/Money"
    },
    "labourLineItemName": {
      "description": "The name of the labour line item that is added to orders",
      "type": "string",
      "minLength": 1
    },
    "labourLineItemSKU": {
      "description": "The SKU of the labour line item that is added to orders",
      "type": "string"
    }
  },
  "additionalProperties": false,
  "definitions": {
    "percentage-or-money": {
      "oneOf": [
        {
          "type": "object",
          "properties": {
            "unit": {
              "const": "currency"
            },
            "money": {
              "$ref": "scalars.json#/definitions/Money"
            }
          },
          "required": ["unit", "money"],
          "additionalProperties": false
        },
        {
          "type": "object",
          "properties": {
            "unit": {
              "const": "percentage"
            },
            "percentage": {
              "type": "number",
              "minimum": 0,
              "maximum": 100
            }
          },
          "required": ["unit", "percentage"],
          "additionalProperties": false
        }
      ]
    },
    "percentage-range": {
      "type": "array",
      "items": [
        { "type": "number", "minimum": 0, "maximum": 100 },
        { "type": "number", "minimum": 0, "maximum": 100 }
      ],
      "minItems": 2,
      "maxItems": 2
    },
    "currency-range": {
      "type": "array",
      "items": [{ "$ref": "scalars.json#/definitions/Money" }, { "$ref": "scalars.json#/definitions/Money" }],
      "minItems": 2,
      "maxItems": 2
    },
    "discount-rule-only-allow-shortcuts": {
      "type": "object",
      "properties": {
        "onlyAllowShortcuts": {
          "const": true
        },
        "allowedPercentageRange": {
          "type": "null"
        },
        "allowedCurrencyRange": {
          "type": "null"
        }
      },
      "required": ["onlyAllowShortcuts", "allowedPercentageRange", "allowedCurrencyRange"],
      "additionalProperties": false
    },
    "discount-rule-do-not-allow-shortcuts": {
      "type": "object",
      "properties": {
        "onlyAllowShortcuts": {
          "const": false
        },
        "allowedPercentageRange": {
          "oneOf": [{ "type": "null" }, { "$ref": "#/definitions/percentage-range" }]
        },
        "allowedCurrencyRange": {
          "oneOf": [{ "type": "null" }, { "$ref": "#/definitions/currency-range" }]
        }
      },
      "required": ["onlyAllowShortcuts", "allowedPercentageRange", "allowedCurrencyRange"],
      "additionalProperties": false
    }
  }
}
